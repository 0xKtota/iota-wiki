<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="IOTA Wiki Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="IOTA Wiki Blog Atom Feed">
<link rel="preconnect" href="${matomoUrl}">
<script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var a="https://matomo.antonionardella.it/";_paq.push(["setTrackerUrl",a+"matomo.php"]),_paq.push(["setSiteId","6"]);var e=document,t=e.createElement("script"),p=e.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=a+"matomo.js",p.parentNode.insertBefore(t,p)}()</script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">Accounts: deposit and withdraw tokens | IOTA Wiki</title><meta data-react-helmet="true" property="og:url" content="https://wiki.iota.org/wasp/tutorial/08"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-wasp-current"><meta data-react-helmet="true" property="og:title" content="Accounts: deposit and withdraw tokens | IOTA Wiki"><meta data-react-helmet="true" name="description" content="Multiple chains in ISCP adds another dimension to the ledger: smart contracts"><meta data-react-helmet="true" property="og:description" content="Multiple chains in ISCP adds another dimension to the ledger: smart contracts"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wiki.iota.org/wasp/tutorial/08"><link data-react-helmet="true" rel="alternate" href="https://wiki.iota.org/wasp/tutorial/08" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wiki.iota.org/wasp/tutorial/08" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d3d63b2e.css">
<link rel="preload" href="/assets/js/runtime~main.c9a69d7c.js" as="script">
<link rel="preload" href="/assets/js/main.68748894.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:#ff0000;color:#fff" role="banner"><div class="announcementBarContent_3EUC">The work on this Wiki is still in progress. Consider contributing by using the in page editor or creating a <a href="https://github.com/iota-community/iota-wiki">PR directly</a></div></div><nav class="navbar navbar--fixed-top navbarHideable_1VR7"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="IOTA Wiki Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_dark.svg" alt="IOTA Wiki Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/docs/learn/about-iota/an-introduction-to-iota"><span>Learn</span></a><a class="navbar__item navbar__link" href="/docs/use/use-cases/industry-applications"><span>Use</span></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wasp/welcome"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/wasp_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Develop &gt; Wasp Node">Develop &gt; Wasp Node</span></a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/develop/getting-started/architecture"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/getting_started_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Getting Started">Getting Started</span></a></li><li style="font-size:10px;color:var(--ifm-color-emphasis-600);padding-top:10px">Chrysalis (IOTA 1.5)</li><li><a class="dropdown__link" href="/chrysalis-docs/welcome"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/chrysalis_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Chrysalis Docs">Chrysalis Docs</span></a></li><li><a class="dropdown__link" href="/bee/getting_started/getting_started"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/bee_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Bee Node">Bee Node</span></a></li><li><a class="dropdown__link" href="/hornet/welcome"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/hornet_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Hornet Node">Hornet Node</span></a></li><li style="font-size:10px;color:var(--ifm-color-emphasis-600);padding-top:10px">Libraries</li><li><a class="dropdown__link" href="/iota.rs/welcome"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/iota_mark_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Core">Core</span></a></li><li><a class="dropdown__link" href="/wallet.rs/welcome"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/wallet_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Wallet">Wallet</span></a></li><li><a class="dropdown__link" href="/stronghold.rs/welcome"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/stronghold_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Stronghold">Stronghold</span></a></li><li><a class="dropdown__link" href="/identity.rs/intro"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/identity_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Identity">Identity</span></a></li><li style="font-size:10px;color:var(--ifm-color-emphasis-600);padding-top:10px">Smart Contracts</li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/wasp/welcome"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/wasp_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Wasp Node">Wasp Node</span></a></li><li style="font-size:10px;color:var(--ifm-color-emphasis-600);padding-top:10px">Coordicide (IOTA 2.0)</li><li><a class="dropdown__link" href="/IOTA-2.0-Research-Specifications/Preface"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/iota_20_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="Coordicide Specs">Coordicide Specs</span></a></li><li><a class="dropdown__link" href="/goshimmer/welcome"><span style="box-align:center;white-space:no-wrap;align-items:center;display:flex;padding:5px"><img src="/img/logo/goshimmer_dark.svg" height="20" style="display:inline;padding-bottom:2px;margin-right:10px" alt="GoShimmer Node">GoShimmer Node</span></a></li></ul></div><a class="navbar__item navbar__link" href="/docs/participate/support-the-network/run-a-node"><span>Participate</span></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog"><span>Blog</span></a><div class="wiki-search" role="button" tabindex="-1"><div class="wiki-search-opened"><span class="toggle_10iL" style="font-family:Material Icons">close</span></div><div class="wiki-search-closed"><span class="toggle_10iL" style="font-family:Material Icons">search</span></div><input type="checkbox" class="wiki-search-screenreader-only" aria-label="Open and close search"></div><div class="wiki-search-page"><div class="wiki-search-header"></div><div class="wiki-search-main"><div class="wiki-search-bar"><div class="wiki-search-logo"><span class="toggle_10iL" style="font-family:Material Icons">search</span></div><input class="wiki-search-input"></div></div></div><div class="react-toggle toggle_2xs0 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3D-N" style="font-family:Material Icons">light_mode</span></div><div class="react-toggle-track-x"><span class="toggle_3D-N" style="font-family:Material Icons">dark_mode</span></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/img/logo.svg" alt="IOTA Wiki Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo_dark.svg" alt="IOTA Wiki Logo" class="themedImage_1VuW themedImage--dark_hz6m"></a><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/wasp/welcome">Welcome</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/readme">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/01">The Solo Package</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/02">Tokens and the UTXO Ledger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/03">Creating a Chain; Core Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/04">Deploying and Running a Rust Smart Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/05">Structure of the Smart Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/06">Sending a Request</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/07">Calling a View</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/wasp/tutorial/08">Deposit and Withdraw Tokens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/09">Sending Tokens to a Smart Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/10">Return Of Tokens in Case of Failure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/11">Sending Tokens from a Smart Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasp/tutorial/12">ISCP On-Chain Accounts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Core Contracts</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Miscellaneous</a></li><li class="menu__list-item"><a class="menu__link" href="/wasp/contribute">Contribute</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Accounts: deposit and withdraw tokens</h1></header><p>Multiple chains in ISCP adds another dimension to the ledger: smart contracts
can exchange assets between themselves on different chains as well as with
addresses on the UTXO Ledger. We will skip explaining the whole picture for time
being and will concentrate on one specific use case.</p><p>Let&#x27;s say we have a wallet, we have private key (the address) and some tokens on
the address. The use case is about sending tokens to and receiving tokens from a
smart contract on a chain.</p><p>Here we explore the concept of <code>on-chain account</code> or just <code>account</code>. On the UTXO
Ledger the private key is represented by the address (the hash of the public
key). That address holds balances of colored tokens. Those tokens are
&quot;controlled&quot; by the private key.</p><p>In ISCP we extend the concept of <em>address</em> with the concept of <code>account</code>. An
<code>account</code> contains colored tokens just like an <code>address</code>. The <code>account</code> is
located on some chain, and it is controlled by the same private key as the
associated address. So, an address can control tokens on the UTXO Ledger
(Level-1, or <code>L1</code>) and on each chain (Level-2, or <code>L2</code>).</p><p>The chain essentially is a custodian of the tokens deposited in its <code>accounts</code>.</p><p>The following test demonstrates how a wallet can deposit tokens in a chain
account and then withdraw them back.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">TestTutorial5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">t </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">testing</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    env </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> solo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">New</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    chain </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewChain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ex5&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// create a wallet with solo.Saldo iotas.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// the wallet has address and it is globally identified</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// through a universal identifier: the agent ID</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    userWallet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> userAddress </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewKeyPairWithFunds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    userAgentID </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> iscp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewAgentID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userAddress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">AssertAddressBalance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userAddress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ledgerstate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ColorIOTA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> solo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Saldo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// solo.Saldo on address</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    chain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">AssertAccountBalance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userAgentID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ledgerstate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ColorIOTA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// empty on-chain</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Logf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Address of the userWallet is: %s&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> userAddress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    numIotas </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetAddressBalance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userAddress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ledgerstate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ColorIOTA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Logf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;balance of the userWallet is: %d iota&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> numIotas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">AssertAddressBalance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userAddress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ledgerstate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ColorIOTA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> solo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Saldo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// send 42 iotas from wallet to own account on-chain, controlled by the same wallet</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    req </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> solo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewCallParams</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">accounts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> accounts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">FuncDeposit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    req</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithIotas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token boolean" style="color:rgb(255, 88, 116)">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> chain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">PostRequestSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">req</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> userWallet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NoError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// check address balance: must be 42 iotas less</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">AssertAddressBalance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userAddress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ledgerstate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ColorIOTA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> solo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Saldo</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// check the on-chain account. Must contain 42 iotas</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    chain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">AssertAccountBalance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userAgentID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ledgerstate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ColorIOTA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// withdraw all iotas</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    req </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> solo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewCallParams</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">accounts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> accounts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">FuncWithdraw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    req</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithIotas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token boolean" style="color:rgb(255, 88, 116)">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> chain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">PostRequestSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">req</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> userWallet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NoError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// we are back to initial situation: IOTA is fee-less!</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">AssertAddressBalance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userAddress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ledgerstate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ColorIOTA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> solo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Saldo</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    chain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">AssertAccountBalance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userAgentID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ledgerstate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ColorIOTA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// empty</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The example above creates a chain, then creates a wallet with solo.Saldo iotas and
sends (deposits) 42 iotas to the corresponding on-chain account by posting
a <code>deposit</code> request to the <code>accounts</code> core contract on that chain. That account
will now contain 42 iotas. The address on the UTXO Ledger will contain 42 iotas
less, of course.</p><p>In the next step the same wallet (<code>userWallet</code>) will withdraw all 42 iotas back
to the address by sending a <code>withdraw</code> request to the <code>accounts</code> contract on
the same chain.</p><p>If the same request would be posted from another user wallet (another private
key), the <code>withdraw</code> request would fail. Try it! Only the owner of the address
can move those funds from the on-chain account.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/wasp/tutorial/07"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Invoking smart contracts. Calling a view</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/wasp/tutorial/09"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sending tokens to the smart contract »</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer padding--none padding-top--xl"><div class="row footer__links padding-top--lg padding-bottom--xl"><div class="col footer__col"><h4 class="footer__title">LEARN</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/learn/about-iota/an-introduction-to-iota">About IOTA</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn/iota-token/overview">IOTA Token</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn/wallets/what-is-a-wallet">Wallets</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn/networks/iota-1.5-chrysalis">Networks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn/resource-materials/glossary">Resource Materials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/learn/research/research-outline">Research</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">USE</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/use/use-cases/industry-applications">Use Cases</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/use/streams/encrypted-data-comms">Streams</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/use/identity/enabling-privacy-and-trust">Identity</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/use/access/secure-access-control">Access</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/use/smart-contracts/programmable-contracts">Smart Contracts</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/use/stronghold/protecting-your-secrets">Stronghold</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/use/oracles/trust-in-real-world-data">Oracles</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/use/utilities/tangle-explorer">Utilities</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">DEVELOP</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/develop/getting-started/architecture">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/develop/fundamentals/cryptography">Fundamentals</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/develop/exchange-integration/guide">Exchange Integration</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/develop/tutorials/youtube">Tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">PARTICIPATE</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/participate/support-the-network/run-a-node">Support the network</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/participate/the-community/discord">The Community</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/participate/partnerships/iota-partnerships">Partnerships</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/participate/funding/edf-funding">Funding</a></li></ul></div></div><div class="footer__bottom padding-top--xl padding-bottom--lg"><div><a href="https://www.iota.org" target="_blank" rel="noopener noreferrer"><img src="/img/iota_logo.svg" alt="IOTA Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/iota_logo_dark.svg" alt="IOTA Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">© 2021 IOTA Wiki, Built with Docusaurus.</div></div><div class="socialBar_2nY3"><a class="padding-horiz--sm padding-vert--md socialLink_1As6" style="background-color:#18243C" href="https://www.youtube.com/c/iotafoundation"><img class="socialImage_2plZ" src="/img/youtube.svg"><div class="socialTitle_3JEm">Youtube</div></a><a class="padding-horiz--sm padding-vert--md socialLink_1As6" style="background-color:#24314A" href="https://www.github.com/iotaledger/"><img class="socialImage_2plZ" src="/img/github.svg"><div class="socialTitle_3JEm">GitHub</div></a><a class="padding-horiz--sm padding-vert--md socialLink_1As6" style="background-color:#303C56" href="https://discord.iota.org/"><img class="socialImage_2plZ" src="/img/discord.svg"><div class="socialTitle_3JEm">Discord</div></a><a class="padding-horiz--sm padding-vert--md socialLink_1As6" style="background-color:#3B4862" href="https://www.twitter.com/iota/"><img class="socialImage_2plZ" src="/img/twitter.svg"><div class="socialTitle_3JEm">Twitter</div></a><a class="padding-horiz--sm padding-vert--md socialLink_1As6" style="background-color:#47546F" href="https://www.reddit.com/r/iota/"><img class="socialImage_2plZ" src="/img/reddit.svg"><div class="socialTitle_3JEm">Reddit</div></a><a class="padding-horiz--sm padding-vert--md socialLink_1As6" style="background-color:#52607B" href="https://www.linkedin.com/company/iotafoundation/"><img class="socialImage_2plZ" src="/img/linkedin.svg"><div class="socialTitle_3JEm">Linkedin</div></a><a class="padding-horiz--sm padding-vert--md socialLink_1As6" style="background-color:#5E6B87" href="https://www.instagram.com/iotafoundation/"><img class="socialImage_2plZ" src="/img/instagram.svg"><div class="socialTitle_3JEm">Instagram</div></a></div></footer></div>
<script src="/assets/js/runtime~main.c9a69d7c.js"></script>
<script src="/assets/js/main.68748894.js"></script>
</body>
</html>