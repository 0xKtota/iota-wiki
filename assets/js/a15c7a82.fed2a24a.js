"use strict";(self.webpackChunkiota_wiki=self.webpackChunkiota_wiki||[]).push([[72160],{96561:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return d},toc:function(){return f},default:function(){return p}});var r=t(22122),a=t(19756),i=(t(67294),t(3905)),o=t(31137),s=t(71871),c=["components"],l={},u="Function Definitions",d={unversionedId:"guide/schema/funcs",id:"guide/schema/funcs",isDocsHomePage:!1,title:"Function Definitions",description:"Here is the full schema.json file for the dividend example. We will now focus on",source:"@site/external/wasp/documentation/docs/guide/schema/funcs.mdx",sourceDirName:"guide/schema",slug:"/guide/schema/funcs",permalink:"/wasp/guide/schema/funcs",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Smart Contract State",permalink:"/wasp/guide/schema/state"},next:{title:"Limiting Access",permalink:"/wasp/guide/schema/access"}},f=[],m={toc:f};function p(e){var n=e.components,t=(0,a.Z)(e,c);return(0,i.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"function-definitions"},"Function Definitions"),(0,i.kt)("p",null,"Here is the full schema.json file for the ",(0,i.kt)("inlineCode",{parentName:"p"},"dividend")," example. We will now focus on\nits ",(0,i.kt)("inlineCode",{parentName:"p"},"funcs")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"views")," sections. Since they are structured identically we will only need\nto explain the layout of these sections once."),(0,i.kt)(o.Z,{defaultValue:"json",values:[{label:"schema.json",value:"json"}],mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"json",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "Dividend",\n  "description": "Simple dividend smart contract",\n  "state": {\n    "memberList": "[]Address // array with all the recipients of this dividend",\n    "members": "[Address]Int64 // map with all the recipient factors of this dividend",\n    "owner": "AgentID // owner of contract, the only one who can call \'member\' func",\n    "totalFactor": "Int64 // sum of all recipient factors"\n  },\n  "funcs": {\n    "init": {\n      "params": {\n        "owner": "?AgentID // optional owner of contract, defaults to contract creator"\n      }\n    },\n    "member": {\n      "access": "owner // only defined owner of contract can add members",\n      "params": {\n        "address": "Address // address of dividend recipient",\n        "factor": "Int64 // relative division factor"\n      }\n    },\n    "divide": {\n    },\n    "setOwner": {\n      "access": "owner // only defined owner of contract can change owner",\n      "params": {\n        "owner": "AgentID // new owner of smart contract"\n      }\n    }\n  },\n  "views": {\n    "getFactor": {\n      "params": {\n        "address": "Address // address of dividend recipient"\n      },\n      "results": {\n        "factor": "Int64 // relative division factor"\n      }\n    }\n  }\n}\n')))),(0,i.kt)("p",null,"As you can see each of the ",(0,i.kt)("inlineCode",{parentName:"p"},"funcs")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"views")," sections defines their functions in the\nsame way. The only resulting difference is in the way the schema tool generates code for\nthem. The code generated for Funcs will be able to inspect and modify the smart contract\nstate, whereas the code generated for Views will only be able to inspect the state."),(0,i.kt)("p",null,"Functions are defined as named subsections in schema.json. The name of the subsection will\nbecome the name of the function. Under each function subsection in turn there can be 3\noptional subsections."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"access")," indicates who is allowed to access the function."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"params")," holds the field definitions that describe the function parameters."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"results")," holds the field definitions that describe the function results.")),(0,i.kt)("p",null,"We will now examine each subsection in more detail. In the next section we will first look\nat the ",(0,i.kt)("inlineCode",{parentName:"p"},"access")," subsection."))}p.isMDXComponent=!0},71871:function(e,n,t){var r=t(67294);n.Z=function(e){var n=e.children,t=e.hidden,a=e.className;return r.createElement("div",{role:"tabpanel",hidden:t,className:a},n)}},31137:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(67294),a=t(54179);var i=function(){var e=(0,r.useContext)(a.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},o=t(86010),s="tabItem_1uMI",c="tabItemActive_2DSg";var l=function(e){var n,t=e.lazy,a=e.block,l=e.defaultValue,u=e.values,d=e.groupId,f=e.className,m=r.Children.toArray(e.children),p=null!=u?u:m.map((function(e){return{value:e.props.value,label:e.props.label}})),h=null!=l?l:null==(n=m.find((function(e){return e.props.default})))?void 0:n.props.value,v=i(),b=v.tabGroupChoices,w=v.setTabGroupChoices,y=(0,r.useState)(h),g=y[0],k=y[1],O=[];if(null!=d){var x=b[d];null!=x&&x!==g&&p.some((function(e){return e.value===x}))&&k(x)}var N=function(e){var n=e.currentTarget,t=O.indexOf(n),r=p[t].value;k(r),null!=d&&(w(d,r),setTimeout((function(){var e,t,r,a,i,o,s,l;(e=n.getBoundingClientRect(),t=e.top,r=e.left,a=e.bottom,i=e.right,o=window,s=o.innerHeight,l=o.innerWidth,t>=0&&i<=l&&a<=s&&r>=0)||(n.scrollIntoView({block:"center",behavior:"smooth"}),n.classList.add(c),setTimeout((function(){return n.classList.remove(c)}),2e3))}),150))},j=function(e){var n,t=null;switch(e.key){case"ArrowRight":var r=O.indexOf(e.target)+1;t=O[r]||O[0];break;case"ArrowLeft":var a=O.indexOf(e.target)-1;t=O[a]||O[O.length-1]}null==(n=t)||n.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},f)},p.map((function(e){var n=e.value,t=e.label;return r.createElement("li",{role:"tab",tabIndex:g===n?0:-1,"aria-selected":g===n,className:(0,o.Z)("tabs__item",s,{"tabs__item--active":g===n}),key:n,ref:function(e){return O.push(e)},onKeyDown:j,onFocus:N,onClick:N},null!=t?t:n)}))),t?(0,r.cloneElement)(m.filter((function(e){return e.props.value===g}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},m.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==g})}))))}},54179:function(e,n,t){var r=(0,t(67294).createContext)(void 0);n.Z=r},3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return m}});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},f=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),f=l(t),m=a,p=f["".concat(c,".").concat(m)]||f[m]||d[m]||i;return t?r.createElement(p,o(o({ref:n},u),{},{components:t})):r.createElement(p,o({ref:n},u))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=f;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=t[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},86010:function(e,n,t){function r(e){var n,t,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=r(e[n]))&&(a&&(a+=" "),a+=t);else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function a(){for(var e,n,t=0,a="";t<arguments.length;)(e=arguments[t++])&&(n=r(e))&&(a&&(a+=" "),a+=n);return a}t.d(n,{Z:function(){return a}})}}]);